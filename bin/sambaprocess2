#!/bin/bash
# process samba stuff

if [ $# -eq "0" ]
then
	echo "$0 usage: "
	echo "$0 soundfile.abc [soundfile.abc ...]"
	echo ""
	echo "Processes soundfiles with ecasound (normalise, add reverb,"
	echo "boost bass and high end, re-normalise)"
	echo "Saves to soundfile_altd.abc"
	exit
fi

while [ -n "$1" -a -e "$1" ]
do
	if [ "${1/_altd.}" != "$1" ]
	then
		echo "skipping $1 - looks already altered"
	else
	    echo processing $1
	ecasound -f:16,1,44100 -i:"$1" \
	    -ea:30 \
	    -eli:1197,0,1,1,0.0,0,0,0,0,0,2,0,0,0,3,3 \
	    -erc:1,2 \
	    -el:gverb,300,2.4,0.75,0.75,0,-16,-17 \
	    -erc:1,1 \
	    -eca:80,0,0,0 \
	    -f:16,1,44100  \
	    -o:"${1%.*}"_altd.${1##*.} >/dev/null
	
	fi

	shift
done
