#!/bin/bash
if [ $# -lt 2 ]
then	echo ""
	echo "Usage: $0 <pattern> <file> [ <file> ]..."
	echo " 	 	 	 Where <pattern> can include %f for original filename (before .extention)"
	echo " 	 	 	 and %F for filename with numbers at the start of the filename removed"
	echo " 	 	 	 and %n for number (starts at 01)";
	echo ""
	exit
fi

pattern=$1
shift
files=( "$@" )

for f in $(seq 1 $#)
do
	# pad file number with a zero
	[ $f -lt 10 ] && f="0$f"
	
	# remove path, so tmp is just the filename
	filename=${1##*/}
	# get extention from filename
	extention=${filename##*.}
	if [ "$extention" != "$filename" ] 
	then
			extention=".$extention" 
			filename=${filename%"$extention"} # remove extention
	else
			extention=""
	fi

	# pattern can have %n for number and %f for original filename
	# or %F for original filename with number at start removed.
	tmp=${pattern//'%n'/$f};
	tmp=${tmp//'%f'/"$filename"};	

	filenameunnumbered=${filename:$( expr "$filename" : '[0-9]*' )};
	tmp=${tmp//'%F'/"$filenameunnumbered"};	
	
	echo "$f renaming: \"$1\" to \"$tmp$extention\""
	mv "$1" "$tmp$extention"
	shift
done
