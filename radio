#!/bin/bash
# play radio from BBC (or other)
# details - see usage below
if [[ "x$2" != "x" ]] 
then
	echo Saving to "$2"
	options="-dumpstream -dumpfile $2"
else
	options=""
fi

if [[ "${1:0:5}" = "rtsp:" ]] 
then
	playcmd=""
	uri=$1
elif [[ "${1:0:5}" = "http:" ]] 
then
	playcmd="-playlist"
	uri=$1
elif [[ "${1:0:4}" = "pnm:" ]] 
then
	playcmd=""
	uri=$1
elif [[ "$1" = "radio4" ]]
then
	playcmd="-playlist"
	uri=http://www.bbc.co.uk/radio4/realplayer/media/fmg2.ram
elif [[ "$1" = "6music" ]]
then
	playcmd="-playlist"
	uri=http://www.bbc.co.uk/6music/ram/dsatg2.ram
else
	echo Usage: radio url [filename]
	echo Where url is either http: or rtsp: OR the name of a radio station
	echo one of: radio4 6music
	echo
	echo If a filename is given, the stream will be written to that file
	echo Note that BBC mostly uses Real Play format, which is the format
	echo which the output file will be written to. Playable with mplayer
	echo If no filename is given it will be played.
	echo
	exit 1
fi

mplayer $playcmd $uri $options


